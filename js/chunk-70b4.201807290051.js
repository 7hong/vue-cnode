(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-70b4"],{"4ee6":function(s,e,t){"use strict";t.r(e);var a=function(){var s=this,e=s.$createElement,t=s._self._c||e;return t("section",{staticClass:"index-section"},[t("div",{staticClass:"topics-container messages"},[t("div",{staticClass:"new-msg"},[t("div",{staticClass:"top"},[t("router-link",{attrs:{to:"/"}},[s._v("主页")]),t("em",[s._v(" / ")]),t("span",[s._v("新消息")])],1),t("Msg",{attrs:{readMessages:s.message.hasnot_read_messages,loading:s.loading}})],1),t("div",{staticClass:"past-times"},[t("div",{staticClass:"top"},[s._v("已读消息")]),t("Msg",{attrs:{readMessages:s.message.has_read_messages,loading:s.loading}})],1)]),t("Sidebar")],1)},n=[],i=(t("a481"),t("365c")),o=function(){var s=this,e=s.$createElement,t=s._self._c||e;return t("div",{staticClass:"msg-list"},[t("div",{directives:[{name:"show",rawName:"v-show",value:s.loading,expression:"loading"}],staticClass:"msg-loading"}),t("div",{directives:[{name:"show",rawName:"v-show",value:0===s.readMessages.length,expression:"readMessages.length === 0"}],staticClass:"no-msg"},[s._v("暂无消息")]),t("ul",s._l(s.readMessages,function(e,a){return t("li",{key:e.id},["reply"===e.type?t("div",[t("router-link",{attrs:{to:"/user/"+e.author.loginname}},[s._v(s._s(e.author.loginname))]),t("span",[s._v(" 回复了你的话题 ")]),t("router-link",{attrs:{to:"/topic/"+e.topic.id}},[s._v(s._s(e.topic.title))])],1):"at"==e.type?t("div",[t("router-link",{attrs:{to:"/user/"+e.author.loginname}},[s._v(s._s(e.author.loginname))]),t("span",[s._v(" 在话题 ")]),t("router-link",{attrs:{to:"/topic/"+e.topic.id}},[s._v(s._s(e.topic.title))]),t("span",[s._v(" 中@了你")])],1):s._e()])}))])},r=[],c={name:"Msg",props:{loading:{type:Boolean,default:!0},readMessages:{type:Array,default:function(){return[]}}}},l=c,u=(t("ede3"),t("2877")),d=Object(u["a"])(l,o,r,!1,null,null,null),g=d.exports,v={name:"Messages",components:{Msg:g},data:function(){return{loading:!0,message:{has_read_messages:[],hasnot_read_messages:[]}}},created:function(){this.fetchMessages()},methods:{fetchMessages:function(){var s=this;axios.get(i["a"].fetchMessages).then(function(e){e.data.success&&(s.loading=!1,s.message=e.data.data)}).catch(function(e){s.$router.replace("/")})}},mounted:function(){this.$store.state.messageCount>0&&axios.post(i["a"].messageMarkAll).then(function(s){}).catch(function(s){return s})}},p=v,m=(t("a1ed"),Object(u["a"])(p,a,n,!1,null,null,null));e["default"]=m.exports},7881:function(s,e,t){},a1ed:function(s,e,t){"use strict";var a=t("7881"),n=t.n(a);n.a},a481:function(s,e,t){t("214f")("replace",2,function(s,e,t){return[function(a,n){"use strict";var i=s(this),o=void 0==a?void 0:a[e];return void 0!==o?o.call(a,i,n):t.call(String(i),a,n)},t]})},c11c:function(s,e,t){},ede3:function(s,e,t){"use strict";var a=t("c11c"),n=t.n(a);n.a}}]);