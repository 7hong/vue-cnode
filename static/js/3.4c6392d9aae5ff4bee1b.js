webpackJsonp([3],{AJQt:function(s,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=t("gyMJ"),n={name:"Msg",props:{loading:{type:Boolean,default:!0},readMessages:{type:Array,default:function(){return[]}}}},i={render:function(){var s=this,e=s.$createElement,t=s._self._c||e;return t("div",{staticClass:"msg-list"},[t("div",{directives:[{name:"show",rawName:"v-show",value:s.loading,expression:"loading"}],staticClass:"msg-loading"}),s._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:0===s.readMessages.length,expression:"readMessages.length === 0"}],staticClass:"no-msg"},[s._v("暂无消息")]),s._v(" "),t("ul",s._l(s.readMessages,function(e,a){return t("li",{key:e.id},["reply"===e.type?t("div",[t("router-link",{attrs:{to:"/user/"+e.author.loginname}},[s._v(s._s(e.author.loginname))]),s._v(" "),t("span",[s._v(" 回复了你的话题 ")]),s._v(" "),t("router-link",{attrs:{to:"/topic/"+e.topic.id}},[s._v(s._s(e.topic.title))])],1):"at"==e.type?t("div",[t("router-link",{attrs:{to:"/user/"+e.author.loginname}},[s._v(s._s(e.author.loginname))]),s._v(" "),t("span",[s._v(" 在话题 ")]),s._v(" "),t("router-link",{attrs:{to:"/topic/"+e.topic.id}},[s._v(s._s(e.topic.title))]),s._v(" "),t("span",[s._v(" 中@了你")])],1):s._e()])}))])},staticRenderFns:[]};var o={name:"Messages",components:{Msg:t("VU/8")(n,i,!1,function(s){t("F8q+")},null,null).exports},data:function(){return{loading:!0,message:{has_read_messages:[],hasnot_read_messages:[]}}},created:function(){this.fetchMessages()},methods:{fetchMessages:function(){var s=this;axios.get(a.a.fetchMessages).then(function(e){e.data.success&&(s.loading=!1,s.message=e.data.data)}).catch(function(e){s.$router.replace("/")})}},mounted:function(){this.$store.state.messageCount>0&&axios.post(a.a.messageMarkAll).then(function(s){}).catch(function(s){return s})}},r={render:function(){var s=this,e=s.$createElement,t=s._self._c||e;return t("section",{staticClass:"index-section"},[t("div",{staticClass:"topics-container messages"},[t("div",{staticClass:"new-msg"},[t("div",{staticClass:"top"},[t("router-link",{attrs:{to:"/"}},[s._v("主页")]),s._v(" "),t("em",[s._v(" / ")]),s._v(" "),t("span",[s._v("新消息")])],1),s._v(" "),t("Msg",{attrs:{readMessages:s.message.hasnot_read_messages,loading:s.loading}})],1),s._v(" "),t("div",{staticClass:"past-times"},[t("div",{staticClass:"top"},[s._v("已读消息")]),s._v(" "),t("Msg",{attrs:{readMessages:s.message.has_read_messages,loading:s.loading}})],1)]),s._v(" "),t("Sidebar")],1)},staticRenderFns:[]};var l=t("VU/8")(o,r,!1,function(s){t("xGnI")},null,null);e.default=l.exports},"F8q+":function(s,e){},xGnI:function(s,e){}});
//# sourceMappingURL=3.4c6392d9aae5ff4bee1b.js.map