{"version":3,"sources":["webpack:///src/components/msg/Msg.vue","webpack:///./src/components/msg/Msg.vue?0f33","webpack:///./src/components/msg/Msg.vue","webpack:///src/views/messages/Messages.vue","webpack:///./src/views/messages/Messages.vue?461a","webpack:///./src/views/messages/Messages.vue"],"names":["Msg","Boolean","Array","msg_Msg","render","_vm","this","_h","$createElement","_c","_self","staticClass","directives","name","rawName","value","expression","_v","readMessages","length","_l","item","index","key","id","type","attrs","to","author","_s","loginname","topic","title","_e","staticRenderFns","Messages","__webpack_require__","normalizeComponent","ssrContext","fetchMessages","_this","then","res","data","catch","e","messageMarkAll","messages_Messages","message","hasnot_read_messages","loading","has_read_messages","Messages_Component","Messages_normalizeComponent","__webpack_exports__"],"mappings":"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","file":"static/js/3.4c6392d9aae5ff4bee1b.js","sourcesContent":["<template>\n    <div class=\"msg-list\">\n        <div class=\"msg-loading\" v-show=\"loading\"></div>\n        <div class=\"no-msg\" v-show=\"readMessages.length === 0\">暂无消息</div>\n        <ul>\n            <li v-for=\"(item, index) of readMessages\" :key=\"item.id\">\n                <div v-if=\"item.type === 'reply'\">\n                    <router-link :to=\"`/user/${item.author.loginname}`\">{{ item.author.loginname }}</router-link>\n                    <span> 回复了你的话题 </span>\n                    <router-link :to=\"`/topic/${item.topic.id}`\">{{ item.topic.title }}</router-link>\n                </div>\n                <div v-else-if=\"item.type == 'at'\">\n                    <router-link :to=\"`/user/${item.author.loginname}`\">{{ item.author.loginname }}</router-link>\n                    <span> 在话题 </span>\n                    <router-link :to=\"`/topic/${item.topic.id}`\">{{ item.topic.title }}</router-link>\n                    <span> 中@了你</span>\n                </div>\n            </li>\n        </ul>\n    </div>\n</template>\n\n<script>\nexport default {\n    name: 'Msg',\n    props: {\n        loading: {\n            type: Boolean,\n            default: true,\n        },\n        readMessages: {\n            type: Array,\n            default () {\n                return [];\n            }\n        }\n    },\n}\n</script>\n\n<style lang=\"scss\">\n@import \"../../assets/scss/_variable.scss\";\n.msg-list {\n    position: relative;\n    background: #fff;\n    padding: 10px;\n\n    .msg-loading {\n        position: absolute;\n        top: 10px;\n        left: 10px;\n        right: 10px;\n        height: 20px;\n        background: #f7f7f7;\n    }\n\n    li {\n        padding: 10px 0;\n        \n        &:not(:nth-last-child(1)) {\n            border-bottom: 1px solid #f6f6f6;\n        }\n\n        > div {\n            overflow: hidden;\n            white-space: nowrap;\n            text-overflow: ellipsis;\n        }\n        \n        a {\n            color: #08c;\n\n            &:hover {\n                text-decoration: underline;\n            }\n        }\n    }\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/msg/Msg.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"msg-list\"},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.loading),expression:\"loading\"}],staticClass:\"msg-loading\"}),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.readMessages.length === 0),expression:\"readMessages.length === 0\"}],staticClass:\"no-msg\"},[_vm._v(\"暂无消息\")]),_vm._v(\" \"),_c('ul',_vm._l((_vm.readMessages),function(item,index){return _c('li',{key:item.id},[(item.type === 'reply')?_c('div',[_c('router-link',{attrs:{\"to\":(\"/user/\" + (item.author.loginname))}},[_vm._v(_vm._s(item.author.loginname))]),_vm._v(\" \"),_c('span',[_vm._v(\" 回复了你的话题 \")]),_vm._v(\" \"),_c('router-link',{attrs:{\"to\":(\"/topic/\" + (item.topic.id))}},[_vm._v(_vm._s(item.topic.title))])],1):(item.type == 'at')?_c('div',[_c('router-link',{attrs:{\"to\":(\"/user/\" + (item.author.loginname))}},[_vm._v(_vm._s(item.author.loginname))]),_vm._v(\" \"),_c('span',[_vm._v(\" 在话题 \")]),_vm._v(\" \"),_c('router-link',{attrs:{\"to\":(\"/topic/\" + (item.topic.id))}},[_vm._v(_vm._s(item.topic.title))]),_vm._v(\" \"),_c('span',[_vm._v(\" 中@了你\")])],1):_vm._e()])}))])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-f0a1e33c\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/msg/Msg.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-f0a1e33c\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Msg.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Msg.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Msg.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-f0a1e33c\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./Msg.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/msg/Msg.vue\n// module id = null\n// module chunks = ","<template>\n    <section class=\"index-section\">\n        <div class=\"topics-container messages\">\n            <div class=\"new-msg\">\n                <div class=\"top\">\n                    <router-link to=\"/\">主页</router-link>\n                    <em> / </em>\n                    <span>新消息</span>\n                </div>\n                <Msg :readMessages=\"message.hasnot_read_messages\" :loading=\"loading\" />\n            </div>\n            <div class=\"past-times\">\n                <div class=\"top\">已读消息</div>\n                <Msg :readMessages=\"message.has_read_messages\" :loading=\"loading\" />\n            </div>\n        </div>\n        <Sidebar />\n    </section>\n</template>\n\n<script>\nimport API_CONFIG from '../../api'\nimport Msg from '../../components/msg/Msg'\nexport default {\n    name: 'Messages',\n    components: {\n        Msg,\n    },\n    data () {\n        return {\n            loading: true,\n            message: {                      // 已读和未读消息\n                has_read_messages: [],\n                hasnot_read_messages: []\n            }\n        }\n    },\n    created () {\n        this.fetchMessages();\n    },\n    methods: {\n        fetchMessages () {\n            axios.get(API_CONFIG.fetchMessages)\n            .then(res => {\n                if( res.data.success ) {\n                    this.loading = false;\n                    this.message = res.data.data;\n                }\n            })\n            .catch(e => {\n                this.$router.replace('/');\n            });\n        }\n    },\n    mounted () {\n        // 标记全部已读\n        if( this.$store.state.messageCount > 0 ) {\n            axios.post(API_CONFIG.messageMarkAll)\n            .then(res => {})\n            .catch(e => e);\n        }\n    }\n}\n</script>\n\n<style lang=\"scss\">\n@import \"../../assets/scss/_variable.scss\";\n.messages {\n    \n    .top {\n        padding: 10px 10px;\n        background: $boxTopColor;\n\n        a {\n            color: #80bd01;\n\n            &:hover {\n                text-decoration: underline;\n            }\n        }\n\n        em {\n            color: #ccc;\n        }\n\n        span {\n            color: #999;\n        }\n    }\n\n    .msg-list {\n        position: relative;\n        background: #fff;\n        padding: 10px;\n\n        .msg-loading {\n            position: absolute;\n            top: 10px;\n            left: 10px;\n            right: 10px;\n            height: 20px;\n            background: #f7f7f7;\n        }\n\n        li {\n            padding: 10px 0;\n            \n            &:not(:nth-last-child(1)) {\n                border-bottom: 1px solid #f6f6f6;\n            }\n\n            > div {\n                overflow: hidden;\n                white-space: nowrap;\n                text-overflow: ellipsis;\n            }\n            \n            a {\n                color: #08c;\n\n                &:hover {\n                    text-decoration: underline;\n                }\n            }\n        }\n    }\n\n    .past-times {\n        margin-top: 15px;\n    }\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/views/messages/Messages.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('section',{staticClass:\"index-section\"},[_c('div',{staticClass:\"topics-container messages\"},[_c('div',{staticClass:\"new-msg\"},[_c('div',{staticClass:\"top\"},[_c('router-link',{attrs:{\"to\":\"/\"}},[_vm._v(\"主页\")]),_vm._v(\" \"),_c('em',[_vm._v(\" / \")]),_vm._v(\" \"),_c('span',[_vm._v(\"新消息\")])],1),_vm._v(\" \"),_c('Msg',{attrs:{\"readMessages\":_vm.message.hasnot_read_messages,\"loading\":_vm.loading}})],1),_vm._v(\" \"),_c('div',{staticClass:\"past-times\"},[_c('div',{staticClass:\"top\"},[_vm._v(\"已读消息\")]),_vm._v(\" \"),_c('Msg',{attrs:{\"readMessages\":_vm.message.has_read_messages,\"loading\":_vm.loading}})],1)]),_vm._v(\" \"),_c('Sidebar')],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-0774b183\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/messages/Messages.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-0774b183\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Messages.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Messages.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Messages.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-0774b183\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./Messages.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/messages/Messages.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}